<!DOCTYPE html>
<html>
  <head>
    <title><%= pkg.name %></title>

    <link rel="stylesheet" type="text/css" href="<%= css %>" media="all" />
  </head>
  <body>
    <div id="app">
      <vue-sequencer inline-template>

        <div class="container">

          <vue-controls inline-template="true"
                        :is-running="isRunning"
                        @toggle-sequence="toggleSequence"
                        :seq="seq">
            <div class="controls">

              <p>
              <select :value="seq.duration"
                 @change="seq.setDuration($event.target.value)">
                <option v-for="bpm in bpms" :value="bpm">{{bpm}}</option>
              </select>
              Duration
              </p>
              <p>
              <form @submit.prevent="seq.setBpm(tempBpm)">
                <input type="text"
                       @change="tempBpm = $event.target.value"
                       :value="seq.bpm">
                <button>Set BPM</button>
              </form>
              </p>
              <button @click="$emit('toggle-sequence')">
                {{ isRunning ? 'Stop' : 'Start' }}
              </button>

            </div>
          </vue-controls>

          <table class="patterns">
            <tr>
              <th>Step</th>
              <th class="column-header"
                  v-for="step in seq.steps"
                  :class="{'current-step': seq.isCurrentStep(step)}">
                {{ step }}
              </th>
            </tr>
            <tr v-for="instrument in seq.instruments">
              <th class="row-header">{{ instrument }}</th>
              <td v-for="step in seq.steps"
                  :class="{'current-step': seq.isCurrentStep(step)}"
                  @click="seq.toggleStep(instrument, step)"
                  class="step">
                {{ seq.isActiveInstrument(instrument, step) ? 'o' : '' }}
              </td>
            </tr>
          </table>

        </div>

      </vue-sequencer>
    </div>
    <script type="text/javascript" src="<%= js %>"></script>
  </body>
</html>
